<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Python Encryption Tool</title>
<script src="https://cdn.jsdelivr.net/pyodide/v0.25.0/full/pyodide.js"></script>
<style>
body {
  background:#0d1117;
  color:#c9d1d9;
  font-family: monospace;
  padding:10px;
}
input, button {
  width:100%;
  margin:5px 0;
  padding:8px;
  font-size:16px;
}
pre {
  background:#161b22;
  padding:10px;
  white-space:pre-wrap;
}
</style>
</head>

<body>
<h3>Python Encryption Tool</h3>

<input id="choose" placeholder="Encrypt(1) or Decrypt(2)">
<input id="code" placeholder="Universal Code">
<input id="level" placeholder="Encryption Standard Level">
<input id="step" placeholder="Encryption Step">
<input id="message" placeholder="Message">

<button onclick="run()">Run</button>

<pre id="out">Loading Pythonâ€¦</pre>

<script>
let pyodideReady = false;
let pyodide;

async function init() {
  pyodide = await loadPyodide();
  pyodideReady = true;
  document.getElementById("out").textContent = "Ready.";
}
init();

async function run() {
  if (!pyodideReady) return;

  const inputs = [
    document.getElementById("choose").value,
    document.getElementById("code").value,
    document.getElementById("level").value,
    document.getElementById("step").value,
    document.getElementById("message").value
  ];

  const pythonCode = `
USER_INPUTS = ${JSON.stringify(inputs)}

_inputs = iter(USER_INPUTS)
input = lambda _: next(_inputs)

import random
letter = "a"
dletter = "a"
lc1 = []
dlc1 = []
dllc1 = []
fr = 1
dfr = 1
dlc2 = []
dllc2 = []

def caesar_encrypt(offset, emessage, fc, eint):
    lc1 = []
    random.seed(offset + 11)
    for c in emessage:
        letter = ord(c)
        letter += int(letter)
        letter += random.randrange(1, 10000)
        letter += random.randrange(0, 9999)
        letter += 20000
        if eint == 0:
            lc1.append(chr(int(letter)))
        elif eint == 1:
            lc1.append(str(letter))
        emessage = ("".join(lc1))
    if fc == 1:
        print(emessage)
    return emessage

def caesar_decrypt(doffset, dmessage, dfc, dint):
    dlc1 = []
    random.seed(doffset + 11)
    for c in dmessage:
        dletter = ord(c)
        dletter -= 20000
        dletter -= random.randrange(0, 9999)
        dletter -= random.randrange(1, 10000)
        dletter -= 1 / 2 * int(dletter)
        dlc1.append(chr(int(dletter)))
        dmessage = ("".join(dlc1))
    if dfc == 1:
        print(dmessage)
    return (dmessage)

def code_expansion(ecode, length, x=10, newcode=int(703518)):
    random.seed(ecode)
    length -= 2
    for i in range(length):
        x = x * 10
    newcode = random.randrange(x, x * 10)
    return (newcode)

def grabcode(gcode, start, end, gfc):
    gcode = str(gcode)
    if gfc == 1:
        print(int(gcode[start:end]))
    return int(gcode[start:end])

def bitchange(bcode, bmessage, bfc, newdigit = int(1) ):
    dlc2 = []
    random.seed(bcode)
    for c in str(bmessage):
        newdigit = int(c)
        newdigit += random.randrange(0,9)
        if newdigit > 9:
            newdigit -= 10
        dlc2.append(str(newdigit))
    newdigit = str(("".join(dlc2)))
    if bfc == 1:
        print(newdigit)
    return newdigit

def debitchange(dbcode, dbmessage, dbfc, dnewdigit = int(1) ):
    dllc2 = []
    random.seed(dbcode)
    for c in str(dbmessage):
        dnewdigit = int(c)
        dnewdigit -= random.randrange(0,9)
        if dnewdigit < 0:
            dnewdigit += 10
        dllc2.append(str(dnewdigit))
    dnewdigit = str(("".join(dllc2)))
    if dbfc ==1:
        print(dnewdigit)
    return dnewdigit

choose = int(input("Encrypt(1) or decrypt(2): "))
univcode = int(input("Enter code: "))
encstandard = int(input("Enter encryption standard level: "))
step = int(input("Enter encryption step: "))
cipmessage = str(input("Message: "))

univcode = code_expansion(univcode, encstandard)

print("Program executed.")
`;

  try {
    pyodide.runPython(pythonCode);
    document.getElementById("out").textContent = "Done. Check output above.";
  } catch (e) {
    document.getElementById("out").textContent = e;
  }
}
</script>
</body>
</html>
